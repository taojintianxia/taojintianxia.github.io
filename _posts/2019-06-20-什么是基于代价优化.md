---
layout: post  
title: 什么是基于代价优化(CBO)  
categories: [代价优化, CBO]  
description: 什么是基于代价优化(CBO)  
keywords: 代价优化, CBO  
---

## 什么是基于代价优化，基于代价优化跟基于规则优化的区别又是什么？

正如你所知道的那样，作为关系数据库一部分的查询优化器，会分析 SQL 的查询余军并选择一种最佳方式执行该查询语句。就是因为它的目标是优化查询效率，所以被称之为查询优化器。

### 基于成本的查询优化器是如何工作的?
基于成本优化器会针对一条可执行的查询语句，对所有可能执行的方式以及场景进行检查。所有所谓的场景都会分配一个‘成本’，这意味着查询语句在这种情况下的执行效率。然后成本优化器会选择‘成本’最低的场景执行那条查询，显而易见，这是最具备效率的执行方式。

### 基于成本优化器使用源自数据库的数据统计
基于成本优化器必须使用源自数据库的数据统计。成本优化器的一些数据统计的例子包括column 唯一值的数量，甚至一张表有多少行。可以看看这个[例子](https://www.programmerinterview.com/index.php/database-sql/selectivity-in-sql-databases/)，该例子讲述了成本优化器是如何根据数据库做决策的。

### 基于成本与基于规则的优化器
不同于成本优化器基于成本来决定执行的方式，基于规则优化器会针对SQL statement 应用一系列的规则。Oracle 允许你自己选择一款优化器，但是，Oracle 也说过，基于规则优化器最终会被抛弃，所以，基于成本优化器是被强烈推荐的。